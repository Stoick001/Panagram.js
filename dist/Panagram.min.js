!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Panagram={})}(this,function(t){"use strict";var n={defaultControls:[{icon:"<b>B</b>",title:"Bold",comName:"bold",state:!0,short:"b"},{icon:"<i>I</i>",title:"Italic",comName:"italic",state:!0,short:"i"},{icon:"<u>U</u>",title:"Underline",comName:"underline",state:!0,short:"u"},{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",comName:"<h1>",formatBlock:"formatBlock"},{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",comName:"<h2>",formatBlock:"formatBlock"},{icon:"P",title:"Paragraph",comName:"<p>",formatBlock:"formatBlock"},{icon:"&#8220; &#8221;",title:"Quote",comName:"<blockquote>",formatBlock:"formatBlock"},{icon:"&#35;",title:"Ordered List",comName:"insertOrderedList",state:!0},{icon:"&#8226;",title:"Unordered List",comName:"insertUnorderedList",state:!0},{icon:"&#128279;",title:"Link",comName:"createLink",extra:function(){return window.prompt("Enter the link URL")}},{icon:"&#128247;",title:"Image",comName:"insertImage",extra:function(){return window.prompt("Enter the link URL")}}]},c=function(t,e,n){t&&!e.includes("List")&&t.classList.toggle("active"),document.execCommand(e,!1,n||null)};t.init=function(t){var e=n[t.controls],o=t.ctrElement,i=t.outElement;i.contentEditable=!0,i.classList.add("output-el"),["click","touch"].forEach(function(t){o.addEventListener(t,i.focus.bind(i))}),i.addEventListener("keydown",function(t){"Tab"===t.key?t.preventDefault():("Enter"===t.key&&"blockquote"===document.queryCommandValue("formatBlock")||""===i.innerHTML||"<br>"===i.innerHTML)&&setTimeout(c.bind(null,null,"formatBlock","<div>"),0)}),e.forEach(function(e){var n=document.createElement("button");n.innerHTML=e.icon,n.title=e.title,n.setAttribute("type","button"),n.classList.add("ctrl-btn"),e.short&&document.addEventListener("keydown",function(t){t.ctrlKey&&t.key.toLowerCase()===e.short&&n.classList.toggle("active")}),["click","touch"].forEach(function(t){e.state?(n.addEventListener(t,c.bind(null,n,e.comName)),["keyup","mouseup"].forEach(function(t){i.addEventListener(t,function(t){document.queryCommandState(e.comName)&&!e.comName.includes("List")?n.classList.add("active"):n.classList.contains("active")&&n.classList.remove("active")})})):e.formatBlock?n.addEventListener(t,c.bind(null,null,e.formatBlock,e.comName)):n.addEventListener(t,function(){var t=e.extra();t&&c(null,e.comName,t)})}),o.append(n)})},Object.defineProperty(t,"__esModule",{value:!0})});
